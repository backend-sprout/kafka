# 토픽과 파티션 

**토픽**
* 카프카에서 데이터를 구분하기 위해 사용하는 단위  
* 1개 이상의 파티션을 소유하고 있다.  

**파티션**   
* 프로듀서가 보낸 데이터들이 저장되는 공간    
* 파티션에 저장되는 데이터들은 '레코드'라고 부른다.   
  
파티션은 카프카의 병렬처리의 핵심으로써, 그룹으로 묶인 컨슈머들(컨슈머그룹)이 레코드를 병렬로 처리할 수 있도록 매칭한다.     
컨슈머의 처리량이 한정된 상황에서 많은 레코드를 병렬로 처리하는 가장 좋은 방법은 컨슈머의 개수를 늘려 스케일 아웃하는 것이다.         
단, 컨슈머의 개수가 파티션보다 많을 경우는 비효율적이고 지향하는 방식은 파티션과 컨슈머의 개수를 1대1로 매칭하는 것이다.  
    
파티션은 FIFO 구조를 가지고 있어서 먼저 들어간 레코드에 대해 컨슈머가 먼저 가져가는 특징이 있다.     
다만 오프셋과 현재 가져온 데이터 위치를 갱신하는 커밋을 통해서 동작하기 때문에 레코드를 삭제하지는 않는다.  
즉, 파티션의 레코드는 컨슈머가 가져가는 것과 별개로 관리된다.     
  
이러한 특징 때문에 **토픽의 레코드는 다양한 목적을 가진 여러 컨슈머 그룹들이 토픽의 데이터를 여러 번 가져갈 수 있다.**       
  
## 토픽 이름 제약 조건   
토픽 이름을 생성할 때 제약조건이 있다.      
  
* 빈 문자열 토픽 이름은 지원하지 않는다.          
* 토픽 이름은 마침표 하나(`.`) 또는 마침표 둘(`..`)로 생성될 수 있다.          
* 토픽 이름의 길이는 249자 미만으로 생성되어야 한다.      
* 토픽 이름은 영어 대소문자와 숫자 0부터 9 그리고 마침표(`.`)와 언더바(`_`)와 하이픈(`-`) 조합으로 생성할 수 있다.     
  이외의 문자열이 포함된 토픽 이름은 생성 불가능하다.    
* 카프카 내부 로직 관리 목적으로 사용되는 2개 토픽(`__consumer_offsets`, `__transaction_state`)과 동일 이름은 안된다.    
* 카프카 내부적으로 사용하는 로직 때문에 토픽 이름에 마침표(`.`)와 언더바(`_`)가 동시에 들어가면 안된다.  
  생성은 할 수 있지만 사용시 이슈가 발생할 수 있기 때문에     
  마침표(`.`)와 언더바(`_`)가 들어간 토픽 이름을 사용하면 WARNNING 메시지가 발생한다.   




