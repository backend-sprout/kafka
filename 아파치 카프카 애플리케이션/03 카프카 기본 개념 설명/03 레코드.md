# 레코드 
레코드는 `타임스탬프`, `메시지 키`, `메시지 값`, `오프셋(디폴트 0)`으로 구성되어 있다.          
프로듀서가 생성한 레코드가 브로커로 전송되면 오프셋과 타임스탬프가 지정되어 저장된다.          
브로커에 한번 적재된 레코드는 수정할 수 없고 로그 리텐션 기간 또는 용량에 따라서 삭제된다.       

**타임 스탬프**    
레코드에 지정되는 타임스탬프는 브로커 기준 유닉스 시간이 설정된다.           
컨슈머는 레코드의 타임스탬프를 토대로 레코드가 언제 브로커에 적재되었는지 알 수 있다.     
다만 프로듀서가 레코드를 생성할 때 임의의 타임 스탬프값을 설정할 수 있고,    
카프카 0.10.0.0 버전에서만 타임스태프를 사용할 수 있다는 점을 유의해야한다.   
  
**메시지 키**     
메시지 키는 메시지 값을 순서대로 처리하거나 메시지 값의 종류를 나타내기 위해 사용한다.     
메시지 키를 사용하면 프로듀서가 토픽에 레코드를 전송할 때 메시지 키의 해시값을 토대로 파티션을 지정하게 된다.     
즉, 동일한 메시지 키라면 동일 파티션에 들어간다.     
  
단, 어느 파티션에 지정될지 알 수 없고 파티션 개수가 변경되면 메시지 키와 파티션 매칭이 달라지므로 주의해야한다.   
프로듀서가 메시지를 전송할 때 메시지 키를 설정하지 않는다면 null 값이 날라간다.     
메시지 키가 null로 설정된 레코드는 프로듀서 기본 설정 파티셔너에 따라서 파티션에 분배되어 적재된다.   

**메시지 값**  
메시지 값에는 실질적으로 처리할 데이터가 들어 있다.     
메시지 키와 메시지 값은 직렬화되어 브로커로 전송되기 때문에        
컨슈머가 이용할 때는 직렬화한 형태와 동일한 형태로 역직렬화를 수행해야한다.     
   
프로듀서가 StringSerializer로 직렬화한 메시지 값을           
컨슈머가 IntegerDeserializer로 역직렬화 하면 정상적인 데이터를 얻을 수 없다.          
 
**오프셋**     
레코드의 오프셋은 0 이상의 숫자로 이루어졌다.       
레코드의 오프셋은 직접 지정할 수 없고 브로커에 저장될 때 이전에 전송된 레코드의 오프셋 + 1값으로 생성된다.         
오프셋은 카프카 컨슈머가 데이터를 가져갈 때 사용한다.     
오프셋을 사용하면 컨슈머 그룹으로 이루어진 카프카 컨슈머들이 파티션의 데이터를 어디까지 가져갔는지 명확히지정할 수 있다.   

