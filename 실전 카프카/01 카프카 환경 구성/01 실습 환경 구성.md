# AWS를 이용한 EC2 구성 
# 카프카 클러스터 구성 

스텐드얼론 환경이 아닌 클러스터 환경을 기본으로 구성한다.    
AWS의 메니저드 서비스가 아닌 EC2 인스턴스 위에 카프카 클러스터를 직접 설치!    

## 앤서블 설치  

카프카를 구성하는데 어려움이 있어서 자동화 도구인 **앤서블(Ansible)** 를 이용하여 주키퍼와 카프카를 설치한다.     
앤서블은 다수의 서버를 대상으로 설정 관리, 애플리케이션 배포 등을 코드로 관리할 수 있도록 도움을 주는 도구다.   

**EC2**   
```console
sudo amazon-linux-extras install -y ansible2
```

## 깃설치 클론 

**깃설치**   
```console
sudo yum install -y git
```
* 깃이 없을 수 잇으므로 설치해주자 

**클론**
```console
git clone https://github.com/kwj1270/kafka2.git
```
* 원본 레포를 해치고 싶지 않아서 포크한후 클론했다.  

## 보안키 설정 
  
인스턴스에서 다른 인스턴스로 접속이 가능하려면, 그에 맞는 pem 키가 있어야한다.         
로컬에서 인스턴스로 접근할때는 키가 있어서 괜찮지만, 인스턴스에서 인스턴스는 그렇지 않다.        
이를 위해 배포 서버에서 pem 키를 가지고 다른 인스턴스에 접근할 수 있도록 설정해주어야한다.      
    
방법은 간단하다. 로컬에서 배포 서버에 pem 키를 보내면 된다.(ssl 방식이므로 scp 이용)     



**로컬**
```
```
