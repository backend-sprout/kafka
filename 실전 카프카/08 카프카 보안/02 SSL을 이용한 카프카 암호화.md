# SSL을 이용한 카프카 암호화.  

자바 기반 애플리케이션에서는 **키스토어**라고 불리는 인터페이스를 통해 `퍼블릭 키`, `프라이빗 키`, `인증서`를 추상화해 제공한다.       
카프카 또한 자바 기반 애플리케이션이므로 자바의 `keytool` 이라는 명령어를 이용해 **카프카에 SSL 적용 작업을 진행하게 된다.**         

[#](#)  

카프카 SSL 적용을 위한 전반적인 구성도를 나타냈으며 카프카 단독 서버 모드가 아닌 클러스터 환경 기준이다.       

## 브로커 키스토어 생성 

클러스터 내 각 브로커마다 프라이빗 키와 인증서를 만들어야 하므로 이를 저장하기 위한 키스토어를 먼저 생성한다.     
SSL을 설명하기에 키스토어와 트러스트스터오를 살펴보자.  

[#](#)   

키스토어와 트러스트스토어라는 용어는 클라이언트와 서버 사이에 자바 애프릴케이션을 이용해 SSL 연결을 할 때 사용한다.   
키스토어와 트러스트스토어 모두 keytool 을 이용해 관리되며, 각 스토어에 저장되는 내용은 다소 차이가 있다.    

**키스토어**
* 서버 측면에서 프라이빗 키와 인증서를 저장하며, 자격 증명을 제공한다.    
* 그외에 프라이빗하고 민감한 정보를 저장한다.     
   
**프라이빗스토어**   
* 클라이언트 측면에서 서버가 제공하는 인증서를 검증하기 위한 퍼블릭 키와 서버와 SSL 연결에서 유효성을 검사하는 서명된 인증서를 저장한다.  
* 민감한 정보는 저장하지 않는다.  

아제 SSL 적용에 필요한 파일들을 생성하기 전 모두 한 곳에 모아두기 위해 SSL 이라는 디렉토리를 먼저 만든다.   
키스토어와 트러스트스토어 생성 시 비밀번호를 입력하는 경우가 많다.   
따라서 반복적인 작업을 최소화하기 위해 비밀번호를 환경변수로 비밀 번호룰 한번만 등록한 후 재사용하자.   

 






