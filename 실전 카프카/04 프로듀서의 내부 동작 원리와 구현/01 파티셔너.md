프로듀서가 전송하려는 메시지들은 프로듀서의 `send()` 메서드를 통해 `시리얼라이저`, `파티셔너`를 거쳐 카프카로 전송된다.   
먼저 파티셔너가 무엇인지부터 살펴보자.   

# 파티셔너 
       
카프카의 토픽은 성능 향상을 위한   
병렬 처리가 가능하도록 하기 위해 **파티션으로 나눈다**    
그리고 **최소 하나 또는 둘 이상의 파티션으로 구성**된다.          
    
프로듀서가 카프카로 전송한 메시지는 **해당 토픽내 각 파티션의 로그 세그먼트에 저장된다.**    
   
따라서 프로듀서는 토픽으로 메시지를 보낼 때        
**해당 토픽의 어느 파티션으로 메시지를 보내야 할지를 결정** 해야하는데 이때 사용하는 것이 **파티셔너**이다.        
  
프로듀서가 **파티셔너를 결정하는 디폴트 알고리즘**은       
**메시지의 키를 해시 처리해 파티션을 구하는 방식**을 사용한다.      
따라서 **메시지의 키값이 동일하면 해당 메시지들은 모두 같은 파티션으로 전송된다.**      
    
예상치 못한 많은 양의 메시지가 카프카로 인입되는 경우,         
카프카는 처리량을 높이기 위해 토픽의 파티션을 늘릴 수 있는 기능을 제공한다.         
하지만, **파티션 수가 변경됨과 동시에 메시지의 키와 매핑된 해시 테이블도 변경된다.**     
즉, **동일한 메시지를 보내더라도 다른 파티션으로 전송될 수 있는 문제가 발생한다.**      
  
이렇게 메시지의 키를 이용해 카프카로 메시지를 전송하는 경우,     
관리자의 의도와는 다른 방식으로 메시지 전송이 이뤄질 수 있으므로      
**되도록 파티션 수를 변경하지 않는 것을 추천한다.**   

## 라운드 로빈 전략 




