 
# 프로듀서 기본 동작과 예제 

프로듀서는 카프카의 토픽으로 메시지를 전송하는 역할을 담당한다.       
프로듀서는 여러 옵션을 제공하므로,    
원하는 형태에 따라 옵션을 변경하면서 다양한 방법으로 카프카로 메시지를 전송할 수 있다.      

# 프로듀서 디자인 

![img](https://user-images.githubusercontent.com/50267433/148359791-ce439f0c-7472-45c2-a099-b2e8d16c1af8.png)

**ProducerRecor**
* 카프카로 데이터를 전송하기 위한 실제 데이터이며 토픽, 파티션 키, 벨류로 구성되어 있다.           
* 필숫값    
    * 토픽    
    * 벨류(메시지 내용)     
    * 프로듀서가 카프카로 레코드를 전송할 때, 카프카의 특정 토픽으로 메시지를 전송함으로                 
* 선택사항  
    * 파티션 : 특정 파티션을 지정하기 위한 파티션      
    * 키 : 특정 파티션에 레코드들을 정렬하기 위한 키        

각 레코드들은 프로듀서의 send() 메서드를 통해 시리얼라이저, 파티셔너를 거치게 된다.         
만약, 프로듀서 레코드의 선택사항인 파티션을 지정했다면,           
파티셔너는 아무 동작도 하지 않고 지정된 파티션으로 레코드를 전달한다.  

파티션을 지정하지 않은 경우에는 키를 가지고 파티션을 선택해 레코드를 전달하는데, 기본적으로 라운드 로빈 방식으로 동작한다.    
  
이렇게 프로듀서 내부에서는 send() 동작 이후 레코드들을 파티션별로 잠시 모아둔다.       
레코드들을 모아두는 이유는 프로듀서가 카프카로 전송하기 전, 배치 전송을 하기 위함이다.    
   
전송이 실패하면 재시도 동작이 이뤄지고 지정된 횟수만큼의 재시도가 실패하면 최종 실패를 전달하며,     
전송이 성공하면 메타 데이터를 리턴하게 된다.       

# 프로듀서 주요 옵션 





