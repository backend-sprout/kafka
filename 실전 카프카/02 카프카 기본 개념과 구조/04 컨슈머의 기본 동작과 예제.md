# 컨슈머의 기본 동작과 예제 
 
컨슈머는 토픽에 저장되어 있는 메시지를 가져오는 역할을 담당한다.       
컨슈머가 단순하게 카프카로부터 메시지만 가져오는 것 같지만,         
내부적으로는 컨슈머 그룹, 리밸런싱 등 여러 동작을 수행한다.      
      
이러한 컨슈머의 기본 동작과 옵션을 잘 이해한다면 내가 원하는 형태로 컨슈머를 구성, 운영할 수 있다.        
프로듀서로 아무리 빠르게 메시지를 전송하더라도 컨슈머가 카프카로부터 빠르게 메시지를 읽어오지 못한다면 결국 지연이 발생한다.       

# 컨슈머의 기본 동작   
컨슈머 그룹은 하나 이상의 컨슈머들이 모여있는 그룹을 의미하고 컨슈머는 반드시 컨슈머 그룹에 속해야한다.         
**컨슈머 그룹은 각 파티션의 리더에게 카프카 토픽에 저장된 메시지를 가져오기 위한 요청을 보낸다.**       
     
이때, 파티션 수와 컨슈머 수는 1대1로 매핑되는 것이 가장 이상적이다.    
컨슈머 수가 파티션 수보다 많다고 해서 토픽의 메시지를 더 빠르게 가져오거나 처리량이 높아지는 것은 아니다.        
오히려 많은 수의 컨슈머들이 그냥 대기 상태로 존재하게 되는 문제가 발생한다.    
      
액티브/스탠바이 개념으로 추가 컨슈머가 더 있으면 좋을 것이라고 생각할 수도 있지만,    
**컨슈머 그룹내에서 리밸런싱 동작을 통해 장애가 발생한 컨슈머의 역할을 동일한 그룹에 있는 다른 컨슈머가 그 역할을 대신 수행하므로**         
굳이 장애 대비를 위한 추가 컨슈머 리소스를 할당하지 않아도 된다.          
(즉, 장애 발생시 다른 컨슈머가 여러 파티션에 대해서 작업을 처리해줄 수 있다.)   

# 컨슈머의 주요 옵션  









